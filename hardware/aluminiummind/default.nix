# this is an edited form of the nixos config generated by `orb`
{ modulesPath, ... }:
{
  imports = [
    # Include the default lxd configuration.
    "${modulesPath}/virtualisation/lxc-container.nix"
    # Include the OrbStack-specific configuration.
    ./orbstack.nix
  ];

  systemd.network.networks."50-eth0" = {
    matchConfig.Name = "eth0";
    networkConfig = {
      DHCP = "ipv4";
      IPv6AcceptRA = true;
    };
    linkConfig.RequiredForOnline = "routable";
  };

  boot.loader.systemd-boot.enable = false;

  # Extra certificates from OrbStack.
  security.pki.certificates = [
    ''
            -----BEGIN CERTIFICATE-----
      MIIDuzCCAqOgAwIBAgIEDWtY8TANBgkqhkiG9w0BAQsFADBAMT4wPAYDVQQDEzVB
      bmR1cmlsIEluZHVzdHJpZXMgSlNTIEJ1aWx0LWluIENlcnRpZmljYXRlIEF1dGhv
      cml0eTAeFw0yMDAxMTYxNzQ1MTNaFw0zMDAxMTgxNzQ1MTNaMEAxPjA8BgNVBAMT
      NUFuZHVyaWwgSW5kdXN0cmllcyBKU1MgQnVpbHQtaW4gQ2VydGlmaWNhdGUgQXV0
      aG9yaXR5MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAklZUJgeELih+
      jR6whf/aFqqzqUYPV6aFujMISdzw7bY77B4QWqWW4Gp8BFn4wNX+7F0Qu3h5cK8R
      MziIjWCZ0VUEvvbGkbtuIWltUX0Q2/+a/dzmnVhWJL0PYec4Qc8QpDuxjr1dqWu0
      oXA7JBsTmEkTIYZ8Hpm3ifM/PAJpSEi9LTr5V93qxGZBaV0CYqSJEZkwY+0Ubhnw
      oPFHJu9HH1uUMjKt0GxrvuLLbz8ICDLgwyZkv8Nr8T6C8ffX6uliKGy5BfLCjP2b
      /55M0PT9fQeEukZFnG6PGZIXmCjXKenHzDMW+dddwvpyhyTW/XYgGN7fxpcl4Ock
      yc3wTVLI8QIDAQABo4G8MIG5MB0GA1UdDgQWBBQ9p4rXJSn0lVH7XrO1z6vdfgSM
      SjATBgNVHSUEDDAKBggrBgEFBQcDATAOBgNVHQ8BAf8EBAMCAaYwDwYDVR0TAQH/
      BAUwAwEB/zBBBgNVHR8EOjA4MDagNKAyhjBodHRwczovL2FuZHVyaWwuamFtZmNs
      b3VkLmNvbS8vQ0EvSkFNRkNSTFNlcnZsZXQwHwYDVR0jBBgwFoAUPaeK1yUp9JVR
      +16ztc+r3X4EjEowDQYJKoZIhvcNAQELBQADggEBAELLE2d2fHQv0ReekxwPiZFU
      t83fjYxaxcs7vaVyAw7C2VxAcmqN/ml4juXtUpM3gXQa9dlYmztU+c8+qEKk7XjJ
      lVmhthtgly2XnhNSxOSuIK7BLdFtCgKb9XAwc995UoMXTd6oqja7AlkiRVYMmrkc
      Kd0jxQ2CZImIqype+7hc2Oe0ps/SXRJ48/yPl4TdqhVuFbxxVqsr7vtRAAMaXoTF
      YghW2mgx/TbnheXQ0vzSGXNP82TafYdngozEa5QKQLWNUVbb9WnaRHvbPDlVxNVC
      vIqey5KKsDpH/9cUgDVQaBws66H64AFDOEkYJj8Oykeaw9Tv9nhSk/IVz7Qq6oE=
      -----END CERTIFICATE-----

      -----BEGIN CERTIFICATE-----
      MIID3TCCAsWgAwIBAgIRAM/W7Lx8ZLLJnABoJpvQyOUwDQYJKoZIhvcNAQELBQAw
      gYcxCzAJBgNVBAYTAlVTMRswGQYDVQQKDBJBbmR1cmlsIEluZHVzdHJpZXMxETAP
      BgNVBAsMCENvcnBUZWNoMQswCQYDVQQIDAJDQTEmMCQGA1UEAwwdSW50ZXJuYWwg
      QXBwbGljYXRpb25zIFJvb3QgQ0ExEzARBgNVBAcMCkNvc3RhIE1lc2EwHhcNMjUw
      MTE0MDQ1NTI5WhcNNDUwMTE0MDU1NTI3WjCBhzELMAkGA1UEBhMCVVMxGzAZBgNV
      BAoMEkFuZHVyaWwgSW5kdXN0cmllczERMA8GA1UECwwIQ29ycFRlY2gxCzAJBgNV
      BAgMAkNBMSYwJAYDVQQDDB1JbnRlcm5hbCBBcHBsaWNhdGlvbnMgUm9vdCBDQTET
      MBEGA1UEBwwKQ29zdGEgTWVzYTCCASIwDQYJKoZIhvcNAQEBBQADggEPADCCAQoC
      ggEBAKT+wtU+kYvXY6dGiA4xIftBDLXPU1lpDJwthvRwabMIwVoKMsxQkDzoGoMM
      Id8wVjFTes/q5NBv4yn0ntXoUkVGF4OlOVoLgaA2B0Zdhhe63rwJhK0J25KxOnQ7
      Doq1cc1PMBqtxYQMNV0r0x7Gd6HgrlK9tvO01LJvtP+evcz8GntWmS3JWv4JGIrt
      /greO8ZjvK+xV04AqyS3xXU1i5GmO5xKTqaXZ71YLFvDPUcCO9JfwWXZRa5FeUnU
      tzIadIETWMYzy0KTCtH0FKekSRMawjOE9M7LXYo8NoyKwhCi3LroE0NDLzlkxoZC
      EzeUYRw5E++Ge1GZIbhHwYwamhkCAwEAAaNCMEAwDwYDVR0TAQH/BAUwAwEB/zAd
      BgNVHQ4EFgQUS/+fcNNQjy96NrC6L1cfdmcezlgwDgYDVR0PAQH/BAQDAgGGMA0G
      CSqGSIb3DQEBCwUAA4IBAQCHvqWVVWykpGdwr0UNTm9Fn3Bjzp6rQXzDl8SKJaPc
      UfUEXayNnf03pERNvc4YLRBVk5kRNdur/zm+LaB7syd1QIePodz93Uy5sr89z7TS
      +mUuWkdEa/uepzPYiJ61EIxYK6J+0Vzvcfl/iEiQ970UrN4Nv4rokmJY/hakGZQa
      GOWsFUkAn27URPlK9im3KAEOrZn2DTlnVPX4tXXizwTJcdf64K2yAaiiCi54Ltm6
      y+8jEybPeV25Q4boFAq6TRmbpBmvqdTp7izDHt6FaWkJ9SLOehzCKQDh45tllmC9
      2UJDDSFVkeCC/FY7DiNy1wfdIjMCfgQ2ZXl3q9y8IFd/
      -----END CERTIFICATE-----

      -----BEGIN CERTIFICATE-----
      MIIDwDCCAqigAwIBAgIQao4jLvfZCCWCxGnjC1VGVzANBgkqhkiG9w0BAQsFADB6
      MQswCQYDVQQGEwJVUzEbMBkGA1UECgwSQW5kdXJpbCBJbmR1c3RyaWVzMREwDwYD
      VQQLDAhDb3JwVGVjaDELMAkGA1UECAwCQ0ExGTAXBgNVBAMMEENvcnBUZWNoIFJv
      b3QgQ0ExEzARBgNVBAcMCkNvc3RhIE1lc2EwHhcNMjQwODE0MjM1NzA4WhcNNDQw
      ODE1MDA1NzA1WjB6MQswCQYDVQQGEwJVUzEbMBkGA1UECgwSQW5kdXJpbCBJbmR1
      c3RyaWVzMREwDwYDVQQLDAhDb3JwVGVjaDELMAkGA1UECAwCQ0ExGTAXBgNVBAMM
      EENvcnBUZWNoIFJvb3QgQ0ExEzARBgNVBAcMCkNvc3RhIE1lc2EwggEiMA0GCSqG
      SIb3DQEBAQUAA4IBDwAwggEKAoIBAQCRIQYv5jj76SfXM/vEvjBzJHQii6mkl2Vg
      tC3DqqL2avzpdhjSquD0of7NsmcAgQwgwUBDvT8XljOtBG75Lx1kkyfMM9c45vYa
      4/Hl4oIbDbSw+kTctQV/1jBegK93DCX1xsjXSv54a+ABNFS3dcCqiG1xlwNqq1/f
      qTKPFKABX2Kz2ocmQRZtf5kPl+ICBY6Nmc6uaqqVZuzd4Boy/glbs82MMHwHOm7W
      K6ZfFU5PFpabGPVxuj0NZbQhRWkM1Q9QpW6mOtTTIqngq/Q/8o/LVNWhd634vkiQ
      PyEM3s0Bc8B+3jsiD0x3zM0EmHkME9F/7rBhheAD4r/PqwlR/2ypAgMBAAGjQjBA
      MA8GA1UdEwEB/wQFMAMBAf8wHQYDVR0OBBYEFBb28EPKQpwvWg418xd4vj5D6C6A
      MA4GA1UdDwEB/wQEAwIBhjANBgkqhkiG9w0BAQsFAAOCAQEALLgN3K/NB54/qob5
      brqwPcJKpxlWDXvH0DIiAu3fQBVR0B8Z/VkSXIEIv9ZoaOmDWHtRihc8zvJ9bnEs
      rWMMOVuaJm6T4X0WDF0sJnGp3G2/ihA3nKpPxALGmR2MfecJNOCasf3KK56hH/Ay
      +lcp9YO1a7HngrQ5WClNupmoEI6J2Tk0q03pgaAQTOqmK1hH/UoQuWdGN60bc2VF
      8NAoYvI4TWX+7Pg4vdnPzrjK4znIi4BxOkvtA41zBqZSEznxcaEJgZDKnzPKnH5n
      tAtTYtDNaedkonGmnzK+z9sXak3p6Ak8yebvXp+SzA0od9WrjriFnkiS2UpDvzwl
      278zlw==
      -----END CERTIFICATE-----

      -----BEGIN CERTIFICATE-----
      MIICCzCCAbKgAwIBAgIQC+5WFn7ZO9OdtiJ9yRxaZTAKBggqhkjOPQQDAjBmMR0w
      GwYDVQQKExRPcmJTdGFjayBEZXZlbG9wbWVudDEeMBwGA1UECwwVQ29udGFpbmVy
      cyAmIFNlcnZpY2VzMSUwIwYDVQQDExxPcmJTdGFjayBEZXZlbG9wbWVudCBSb290
      IENBMB4XDTI1MTIxNzAwMTQ1NloXDTM1MTIxNzAwMTQ1NlowZjEdMBsGA1UEChMU
      T3JiU3RhY2sgRGV2ZWxvcG1lbnQxHjAcBgNVBAsMFUNvbnRhaW5lcnMgJiBTZXJ2
      aWNlczElMCMGA1UEAxMcT3JiU3RhY2sgRGV2ZWxvcG1lbnQgUm9vdCBDQTBZMBMG
      ByqGSM49AgEGCCqGSM49AwEHA0IABHzRTuPZG4rlUQ2e3v1GZ5DNyfU0as3aKGnq
      Id8FYPo/9bnuz3Uv3tdfGtzRC/916v4OXaUAwzhfD64IfYl1UyujQjBAMA4GA1Ud
      DwEB/wQEAwIBBjAPBgNVHRMBAf8EBTADAQH/MB0GA1UdDgQWBBTzdT4JgUGZA0gs
      ESVgyJz9yEt9FTAKBggqhkjOPQQDAgNHADBEAiAneB4STxATe59w72A19p1UzuUF
      CxXnVRaTY8BjQwg2qQIgdcjrAXkwEpu9fuVR8C10wwgF8YC+txPkhVwaPpC0jwM=
      -----END CERTIFICATE-----

    ''
  ];

}
